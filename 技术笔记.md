### Norm

*a* = [ [ [2, 3] ], [ [5, 7] ], [ [11, 13] ], [ [17, 19] ] ]
*b* = [ [ [0, 1] ], [ [1, 2] ], [ [3, 5] ], [ [8, 13] ] ]
c = [ [ [1, 2] ], [ [3, 4] ], [ [5, 6] ], [ [7, 8] ] ]

(N, C, H, W) = (3, 4, 1, 2)

#### Bacth norm

along N

#### Layer norm

along C

图片和序列数据处理不同

![image-20230613170259287](image-20230613170259287.png)



![image-20230613170330455](image-20230613170330455.png)



#### Instance norm

batchsize=1 or channel=1

#### Group norm

between IN and LN, split the channels into groups

### 数据集

#### CLEVR

### GeGLU激活函数

$$
GeGLU(x,W,V,b,c)=GELU(xW+b)\otimes(xV+c)
$$

### Controlnet inpaint

mask用高斯核进行模糊处理，使用cv2.INTER_AREA插值使得shape压缩到潜在维度，以便和潜在变量融合

在去噪的每个时间步数将采样得到的图片和当前噪音水平的噪音图片xt根据mask进行融合（减缓接缝痕迹）

![image-20230615172946654](image-20230615172946654.png)

